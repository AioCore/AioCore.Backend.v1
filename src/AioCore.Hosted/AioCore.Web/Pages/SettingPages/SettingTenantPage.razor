@page "/s/tenants"
@using System.ComponentModel
@using AntDesign.TableModels
<PageTitle Title="Cấu hình thuê bao"/>

<AiocBreadcrumb/>

<dl class="bg-white divide-y grid grid-cols-1 md:divide-y-0 md:grid-cols-3 mt-5 overflow-hidden rounded-lg border border-gray-100 dark:bg-gray-900 dark:border-gray-800">
    <div class="px-4 py-5 sm:p-6">
        <dt class="text-base font-normal text-gray-900">
            Tổng số lượng thuê bao
        </dt>
        <dd class="mt-1 flex justify-between items-baseline md:block lg:flex">
            <div class="flex items-baseline text-2xl font-semibold text-indigo-600">
                71,897
                <span class="ml-2 text-sm font-medium text-gray-500">
                    from 70,946
                </span>
            </div>
            <div class="inline-flex items-baseline px-2.5 py-0.5 rounded-full text-sm font-medium bg-green-100 text-green-800 md:mt-2 lg:mt-0"><svg class="-ml-1 mr-0.5 flex-shrink-0 self-center h-5 w-5 text-green-500" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true"><path fill-rule="evenodd" d="M5.293 9.707a1 1 0 010-1.414l4-4a1 1 0 011.414 0l4 4a1 1 0 01-1.414 1.414L11 7.414V15a1 1 0 11-2 0V7.414L6.707 9.707a1 1 0 01-1.414 0z" clip-rule="evenodd"></path></svg>
                <span class="sr-only">
                    Increased by
                </span>
                12%
            </div>
        </dd>
    </div>
    <div class="px-4 py-5 sm:p-6">
        <dt class="text-base font-normal text-gray-900">
            Tổng số người đăng ký
        </dt>
        <dd class="mt-1 flex justify-between items-baseline md:block lg:flex">
            <div class="flex items-baseline text-2xl font-semibold text-indigo-600">
                58.16%
                <span class="ml-2 text-sm font-medium text-gray-500">
                    from 56.14%
                </span>
            </div>

            <div class="inline-flex items-baseline px-2.5 py-0.5 rounded-full text-sm font-medium bg-green-100 text-green-800 md:mt-2 lg:mt-0"><svg class="-ml-1 mr-0.5 flex-shrink-0 self-center h-5 w-5 text-green-500" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true"><path fill-rule="evenodd" d="M5.293 9.707a1 1 0 010-1.414l4-4a1 1 0 011.414 0l4 4a1 1 0 01-1.414 1.414L11 7.414V15a1 1 0 11-2 0V7.414L6.707 9.707a1 1 0 01-1.414 0z" clip-rule="evenodd"></path></svg>
                <span class="sr-only">
                    Increased by
                </span>
                2.02%
            </div>
        </dd>
    </div>
    <div class="px-4 py-5 sm:p-6">
        <dt class="text-base font-normal text-gray-900">
            Trung bình hoạt động trong ngày
        </dt>
        <dd class="mt-1 flex justify-between items-baseline md:block lg:flex">
            <div class="flex items-baseline text-2xl font-semibold text-indigo-600">
                24.57%
                <span class="ml-2 text-sm font-medium text-gray-500">
                    from 28.62%
                </span>
            </div>
            <div class="inline-flex items-baseline px-2.5 py-0.5 rounded-full text-sm font-medium bg-red-100 text-red-800 md:mt-2 lg:mt-0"><svg class="-ml-1 mr-0.5 flex-shrink-0 self-center h-5 w-5 text-red-500" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true"><path fill-rule="evenodd" d="M14.707 10.293a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 111.414-1.414L9 12.586V5a1 1 0 012 0v7.586l2.293-2.293a1 1 0 011.414 0z" clip-rule="evenodd"></path></svg>
                <span class="sr-only">
                    Decreased by
                </span>
                4.05%
            </div>
        </dd>
    </div>
</dl>
<div class="widget w-full p-4 mb-4 rounded-lg bg-white border border-gray-100 dark:bg-gray-900 dark:border-gray-800">
    <div class="flex flex-row items-center justify-between mb-6">
        <div class="flex flex-col">
            <div class="text-sm font-light text-gray-500">Danh sách thuê bao</div>
            <div class="text-sm font-bold">
                <span>Trạng thái hoạt động của thuê bao trên hệ thống</span>
            </div></div>
        <div class="relative">
            <Dropdown Placement="@PlacementType.BottomRight" Class="cursor-pointer">
                <Overlay>
                    <Menu>
                        <MenuItem>
                            <a rel="noopener noreferrer" @onclick="_=>OnToggleTenantDetail()">
                                Thêm mới thuê bao
                            </a>
                        </MenuItem>
                        <MenuItem>
                            <a rel="noopener noreferrer">
                                Xóa thuê bao
                            </a>
                        </MenuItem>
                    </Menu>
                </Overlay>
                <ChildContent>
                    <AiocSvg Size="20">
                        <MenuIcon/>
                    </AiocSvg>
                </ChildContent>
            </Dropdown>
        </div>
    </div>
    <Table class="aioc-table" Size="@TableSize.Small" TItem="Data" DataSource="@_data" OnRowClick="OnRowClick">
        <Column @bind-Field="@context.Name">
            <a>@context.Name</a>
        </Column>
        <Column @bind-Field="@context.Age"></Column>
        <Column @bind-Field="@context.Address">
            <TitleTemplate>
                <span> <Icon Type="environment"/> Address </span>
            </TitleTemplate>
        </Column>
        <Column @bind-Field="@context.Tags">
            @foreach (var tag in context.Tags)
            {
                var color = tag.Length > 5 ? "geekblue" : "green";
                if (tag == "loser")
                {
                    color = "volcano";
                }
                <Tag Color="@color">@tag</Tag>
            }
        </Column>
        <ActionColumn Title="Acton">
            <Space Size=@("middle")>
                <SpaceItem>
                    <a>Xem chi tiết</a>
                </SpaceItem>
                <SpaceItem>
                    <a>Xóa</a>
                </SpaceItem>
            </Space>
        </ActionColumn>
    </Table>
</div>

<Drawer Closable="true" Width="720" Visible="@Visible" Placement="right" Title='("Thông tin thuê bao")' OnClose="_=>OnToggleTenantDetail()">
    <SettingTenantDetail/>
</Drawer>

@code{
    public bool Visible = false;
    
    readonly Data[] _data = {
        new()
        {
            Key = "1",
            Name = "Thẩm mĩ viện đông tây",
            Age = 32,
            Address = "New York No. 1 Lake Park",
            Tags = new[] {"đẹp", "sạch"}
        },
        new()
        {
            Key = "2",
            Name = "Công ty công nghệ AIOC",
            Age = 42,
            Address = "London No. 1 Lake Park",
            Tags = new[] { "phần mềm", "công ty phát triển sản phẩm" }
        },
        new()
        {
            Key = "3",
            Name = "Sàn thương mại điện tử Thiên Lý",
            Age = 32,
            Address = "Sidney No. 1 Lake Park",
            Tags = new[] { "chuẩn", "thường xuyên" }
        }
        };

    public class Data
    {
        [DisplayName("KEY")]
        public string Key { get; set; }

        [DisplayName("TÊN THUÊ BAO")]
        public string Name { get; set; }

        [DisplayName("NĂM HOẠT ĐỘNG")]
        public int Age { get; set; }

        [DisplayName("ĐỊA CHỈ")]
        public string Address { get; set; }

        [DisplayName("NHÃN")]
        public string[] Tags { get; set; }
    }

    void OnRowClick(RowData<Data> row)
    {
        Console.WriteLine($"row {row.Data.Key} was clicked.");
    }

    void OnToggleTenantDetail()
    {
        Visible = !Visible;
    }
}